<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <style>
        :root { --accent: #ff9500; --bg: #0d0d0f; --glass: rgba(255, 255, 255, 0.05); }
        body { 
            background: var(--bg); color: white; font-family: -apple-system, sans-serif;
            display: flex; flex-direction: column; align-items: center; margin: 0; padding: 10px;
            user-select: none; overflow-x: hidden; min-height: 100vh;
        }

        /* –í–∏–¥–∂–µ—Ç—ã —Å–≤–µ—Ä—Ö—É */
        .top-row { display: flex; justify-content: space-between; width: 100%; max-width: 340px; margin-bottom: 10px; }
        .stat-badge { background: var(--glass); padding: 5px 12px; border-radius: 12px; font-size: 11px; border: 1px solid #333; }

        .cat-avatar { font-size: 65px; margin: 5px 0; transition: 0.4s; }

        /* –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ (–º–∏–Ω–∏) */
        .leaderboard { width: 90%; background: var(--glass); border-radius: 15px; padding: 10px; margin-top: 15px; font-size: 11px; }
        .leader-item { display: flex; justify-content: space-between; padding: 3px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }

        /* –ê—á–∏–≤–∫–∏ */
        .achievements { display: flex; gap: 8px; margin: 10px 0; }
        .ach-icon { width: 38px; height: 38px; background: var(--glass); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; border: 1px solid #333; filter: grayscale(1); opacity: 0.3; }
        .ach-active { filter: grayscale(0); opacity: 1; border-color: var(--accent); box-shadow: 0 0 10px var(--accent); }

        /* –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .main-card {
            width: 100%; max-width: 340px; background: var(--glass); border-radius: 30px;
            padding: 20px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(15px);
            text-align: center; position: relative; overflow: hidden;
        }
        #laser { position: absolute; left: 0; width: 100%; height: 2px; background: var(--accent); box-shadow: 0 0 15px var(--accent); display: none; }
        @keyframes scanAnim { 0% { top: 0%; } 100% { top: 100%; } }

        .trust-bar { width: 100%; height: 6px; background: #222; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        #trust-fill { width: 50%; height: 100%; background: linear-gradient(90deg, #ff4d4d, var(--accent), #4aff4a); transition: 1s; }

        .big-btn { width: 90px; height: 90px; border-radius: 50%; border: none; background: linear-gradient(135deg, #ff9500, #ff5e00); font-size: 40px; cursor: pointer; box-shadow: 0 5px 20px rgba(255,149,0,0.4); margin: 10px 0; }

        /* –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
        .social-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; max-width: 340px; margin-top: 15px; }
        .social-btn { background: #2a2a2e; border: 1px solid #444; color: white; padding: 10px; border-radius: 12px; font-size: 11px; font-weight: bold; cursor: pointer; }
        .share-btn { background: #3390ec; border: none; }
    </style>
</head>
<body>

    <div class="top-row">
        <div class="stat-badge">üèÜ –†–∞–Ω–≥: <span id="rank-name">–ù–æ–≤–∏—á–æ–∫</span></div>
        <div class="stat-badge">üë´ –î—Ä—É–∑—å—è: <span id="friend-count">0</span></div>
    </div>

    <div class="cat-avatar" id="cat-face">üòº</div>

    <div class="achievements">
        <div class="ach-icon" id="ach-1" title="–ü–µ—Ä–≤—ã–π –º—è—É">ü§ù</div>
        <div class="ach-icon" id="ach-2" title="–°—ã—Ç—ã–π –ø—É–∑">ü•£</div>
        <div class="ach-icon" id="ach-3" title="–ê–ª—å—Ñ–∞-–ö–æ—Ç (5 –¥—Ä—É–∑–µ–π)">üëë</div>
        <div class="ach-icon" id="ach-4" title="–õ–µ–≥–µ–Ω–¥–∞ (100 —Å–∫–∞–Ω–æ–≤)">üíé</div>
    </div>

    <div class="main-card">
        <div id="laser"></div>
        <div style="font-size: 10px; text-align: left; opacity: 0.6;">–î–û–í–ï–†–ò–ï</div>
        <div class="trust-bar"><div id="trust-fill"></div></div>

        <div id="status" style="font-size: 16px; min-height: 45px; margin: 10px 0; color: #ffcc00; font-weight: bold;">–ü—Ä–∏–ª–æ–∂–∏ –ª–∞–ø—É...</div>
        <button class="big-btn" id="btn" onclick="startScan()">üêæ</button>
        
        <div id="share-zone" style="display:none; margin-top:10px;">
            <button class="social-btn share-btn" style="width:100%" onclick="shareResult()">üì¢ –ü–ï–†–ï–î–ê–¢–¨ –°–õ–û–í–ê –ö–û–¢–ê</button>
        </div>
    </div>

    <div class="social-grid">
        <button class="social-btn" onclick="inviteFriend()">‚ûï –ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê</button>
        <button class="social-btn" onclick="toggleLeaderboard()">üìä –¢–û–ü –ü–†–ê–ô–î–ê</button>
    </div>

    <div class="leaderboard" id="leaderboard" style="display:none;">
        <div style="text-align:center; margin-bottom:5px; font-weight:bold; color:var(--accent);">–¢–û–ü-3 –ü–ï–†–ï–í–û–î–ß–ò–ö–ê</div>
        <div class="leader-item"><span>1. –ö–æ—Ç_–ë–∞–∑–∏–ª–∏–æ</span><span>999 –º—è—É</span></div>
        <div class="leader-item"><span>2. –ú–∞—Ç—Ä–æ—Å–∫–∏–Ω</span><span>850 –º—è—É</span></div>
        <div class="leader-item"><span>3. –í—ã (–¢–´)</span><span id="my-score">0 –º—è—É</span></div>
    </div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let trust = 50;
    let scans = 0;
    let friends = 0;
    const lastResult = "";

    function startScan() {
        if(trust < 10) return tg.showAlert("–ö–æ—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Ç–µ–±—è üòø");
        
        const laser = document.getElementById('laser');
        laser.style.display = 'block';
        laser.style.animation = 'scanAnim 1.2s infinite linear';
        document.getElementById('status').innerText = "–ê–ù–ê–õ–ò–ó–ò–†–£–Æ...";

        setTimeout(() => {
            laser.style.display = 'none';
            const phrases = trust > 60 ? 
                ["–¢—ã ‚Äî –º–æ–π –ª—É—á—à–∏–π —Ä–∞–±! ‚ù§Ô∏è", "–ü–æ—á–µ—à–∏ –∑–∞ —É—à–∫–æ–º, —Ä–∞–∑—Ä–µ—à–∞—é.", "–ú—Ä—Ä—Ä, —Å–µ–≥–æ–¥–Ω—è —Ç—ã –º–æ–ª–æ–¥–µ—Ü."] : 
                ["–ì–¥–µ –ø–∞—à—Ç–µ—Ç, –∫–æ–∂–∞–Ω—ã–π? üòæ", "–¢–≤–æ–∏ –Ω–æ—Å–∫–∏... –æ–Ω–∏ –ø–∞—Ö–Ω—É—Ç –Ω–µ –º—è—Ç–æ–π.", "–£–π–¥–∏, —è –∑–∞–Ω—è—Ç –≤–∞–∂–Ω—ã–º –Ω–∏—á–µ–º."];
            
            const res = phrases[Math.floor(Math.random()*phrases.length)];
            document.getElementById('status').innerText = res;
            document.getElementById('share-zone').style.display = 'block';
            window.lastRes = res;
            
            scans++;
            trust = Math.max(5, trust - 15);
            updateUI();
            tg.HapticFeedback.notificationOccurred('success');
        }, 2000);
    }

    function shareResult() {
        const text = encodeURIComponent(`–ú–æ–π –∫–æ—Ç —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–∫–∞–∑–∞–ª –º–Ω–µ: "${window.lastRes}" üê±\n–ü–æ–π–º–∏ —Å–≤–æ–µ–≥–æ –∫–æ—Ç–∞ –≤ MeowVibe!`);
        tg.openTelegramLink(`https://t.me{text}`);
    }

    function inviteFriend() {
        const text = encodeURIComponent("–°—Ç–∞–Ω—å —á–∞—Å—Ç—å—é –º–æ–µ–π –∫–æ—à–∞—á—å–µ–π –±–∞–Ω–¥—ã –∏ –ø–æ–ª—É—á–∏ +100% –¥–æ–≤–µ—Ä–∏—è –∫–æ—Ç–∞! üêæ");
        tg.openTelegramLink(`https://t.me{tg.initDataUnsafe.user?.id}&text=${text}`);
        // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞
        friends++; 
        trust = 100;
        updateUI();
    }

    function updateUI() {
        const face = document.getElementById('cat-face');
        const fill = document.getElementById('trust-fill');
        fill.style.width = trust + "%";
        document.getElementById('my-score').innerText = scans + " –º—è—É";
        document.getElementById('friend-count').innerText = friends;

        if(trust < 30) face.innerText = "üòæ";
        else if(trust > 75) face.innerText = "üòá";
        else face.innerText = "üòº";

        if(scans > 0) document.getElementById('ach-1').classList.add('ach-active');
        if(trust >= 100) document.getElementById('ach-2').classList.add('ach-active');
        if(friends >= 1) document.getElementById('ach-3').classList.add('ach-active');
        if(scans >= 100) document.getElementById('ach-4').classList.add('ach-active');
        
        const ranks = ["–ù–æ–≤–∏—á–æ–∫", "–ö–æ—à–∞—Ç–Ω–∏–∫", "–ó–∞–∫–ª–∏–Ω–∞—Ç–µ–ª—å", "–ë–æ–≥ –ö–æ—Ç–æ–≤"];
        document.getElementById('rank-name').innerText = ranks[Math.min(Math.floor(scans/10), 3)];
    }

    function toggleLeaderboard() {
        const lb = document.getElementById('leaderboard');
        lb.style.display = lb.style.display === 'none' ? 'block' : 'none';
        tg.HapticFeedback.impactOccurred('light');
    }

    updateUI();
</script>
</body>
</html>
