<script>
    // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    window.addEventListener('load', function() {
        let tg = window.Telegram ? window.Telegram.WebApp : null;
        let trust = 50;
        let lastMiau = "";
        const BOT_USERNAME = "MeowVibe_bot";

        if (tg) {
            tg.ready();
            tg.expand();
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ –∫–æ–Ω—Å–æ–ª—å/alert, —á—Ç–æ –≤—Å—ë –æ–∫
            console.log("Telegram SDK –≥–æ—Ç–æ–≤");
        } else {
            alert("Telegram SDK –Ω–µ –Ω–∞–π–¥–µ–Ω. –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ –±–æ—Ç–∞!");
        }

        // –í—ã–Ω–æ—Å–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å, —á—Ç–æ–±—ã onclick –∏—Ö –≤–∏–¥–µ–ª
        window.startScan = function() {
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            const laser = document.getElementById('laser');

            if (tg && tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            
            btn.disabled = true;
            laser.style.display = 'block';
            laser.style.animation = 'scanAnim 1.5s infinite linear';
            status.innerText = "–ê–ù–ê–õ–ò–ó–ò–†–£–Æ...";

            setTimeout(() => {
                laser.style.display = 'none';
                btn.disabled = false;
                
                const good = ["–õ—é–±–∏–º—ã–π —Ö–æ–∑—è–∏–Ω... ‚ù§Ô∏è", "–ú—Ä—Ä—Ä-–º—è—É! ‚ú®", "–¢—ã –ª—É—á—à–∏–π —á–µ–ª–æ–≤–µ–∫."];
                const bad = ["–ì–¥–µ –µ–¥–∞, –∫–æ–∂–∞–Ω—ã–π? üòæ", "–ö–∞–∫ —Ü–∞—Ä–∞–ø–Ω—É! üòº", "–ù–µ—Å–∏ –ø–∞—à—Ç–µ—Ç!"];
                
                const isGood = Math.random() > 0.5;
                const res = isGood ? good[Math.floor(Math.random()*good.length)] : bad[Math.floor(Math.random()*bad.length)];
                
                status.innerText = res;
                lastMiau = res;
                updateUI();
                
                if (tg && tg.HapticFeedback) tg.HapticFeedback.notificationOccurred(isGood ? 'success' : 'error');
            }, 2000);
        };

        window.doInvite = function() {
            const text = encodeURIComponent("–£–∑–Ω–∞–π –º—ã—Å–ª–∏ —Å–≤–æ–µ–≥–æ –∫–æ—Ç–∞! üêæ");
            const url = `https://t.me{BOT_USERNAME}&text=${text}`;
            if (tg) tg.openTelegramLink(url);
            else window.open(url);
        };

        window.doShare = function() {
            if (!lastMiau) return alert("–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ –Ω–∞ –ª–∞–ø—É!");
            const text = encodeURIComponent(`–ú–æ–π –∫–æ—Ç –≤—ã–¥–∞–ª: "${lastMiau}"\n–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–µ–≥–æ –≤ @${BOT_USERNAME}`);
            const url = `https://t.me{text}`;
            if (tg) tg.openTelegramLink(url);
            else window.open(url);
        };

        window.getOracle = function() {
            if (tg && tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            const preds = ["–ú–∏—Å–∫–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞!", "–û–ø–∞—Å–∞–π—Å—è –ø—ã–ª–µ—Å–æ—Å–∞.", "–í—Ä–µ–º—è —Ç—ã–≥-–¥—ã–∫–∞!"];
            document.getElementById('oracle-text').innerText = preds[Math.floor(Math.random()*preds.length)];
        };

        function updateUI() {
            const fill = document.getElementById('trust-fill');
            if (fill) fill.style.width = trust + "%";
        }
    });
</script>
