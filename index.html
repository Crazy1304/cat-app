<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <style>
        :root { --accent: #ff9500; --bg: #0d0d0f; --glass: rgba(255, 255, 255, 0.05); }
        
        body { 
            background: var(--bg); color: white; font-family: -apple-system, sans-serif;
            display: flex; flex-direction: column; align-items: center; margin: 0; padding: 15px;
            user-select: none; -webkit-user-select: none; overflow-x: hidden;
        }

        /* –®–∫–∞–ª–∞ –î–æ–≤–µ—Ä–∏—è */
        .trust-section { width: 100%; max-width: 320px; margin-bottom: 25px; text-align: center; }
        .trust-label { font-size: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; opacity: 0.8; }
        .trust-bar { width: 100%; height: 8px; background: #222; border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
        #trust-fill { width: 40%; height: 100%; background: linear-gradient(90deg, #ff4d4d, var(--accent)); transition: 1s cubic-bezier(0.4, 0, 0.2, 1); }

        /* –°–µ—Ç–∫–∞ –•—É–∫–æ–≤ */
        .hooks-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; max-width: 340px; margin-bottom: 25px; }
        .hook-card {
            background: var(--glass); border-radius: 18px; padding: 15px; text-align: center;
            border: 1px solid rgba(255,255,255,0.1); transition: 0.2s; cursor: pointer; position: relative;
        }
        .hook-card:active { transform: scale(0.95); background: rgba(255,149,0,0.15); }
        .hook-card span { display: block; font-size: 22px; margin-bottom: 5px; }
        .hook-card b { font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
        .premium-star { position: absolute; top: 6px; right: 8px; font-size: 10px; color: #ffcc00; }

        /* –°–∫–∞–Ω–µ—Ä –∏ –ö–Ω–æ–ø–∫–∞ */
        .scanner-container {
            width: 100%; max-width: 320px; background: var(--glass); border-radius: 30px;
            padding: 30px 20px; position: relative; border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px); text-align: center; overflow: hidden;
        }
        #laser {
            position: absolute; left: 0; top: -5px; width: 100%; height: 3px;
            background: var(--accent); box-shadow: 0 0 15px var(--accent);
            display: none; z-index: 10;
        }
        @keyframes scanAnim { 0% { top: 0%; } 100% { top: 100%; } }

        #output { font-size: 20px; font-weight: 600; min-height: 60px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        
        .main-btn {
            width: 110px; height: 110px; border-radius: 50%; border: none;
            background: linear-gradient(135deg, #ff9500, #ff5e00);
            font-size: 45px; cursor: pointer; box-shadow: 0 0 30px rgba(255,149,0,0.3);
            transition: 0.2s; -webkit-tap-highlight-color: transparent;
        }
        .main-btn:active { transform: scale(0.85); box-shadow: 0 0 15px rgba(255,149,0,0.5); }

        /* –ö–Ω–æ–ø–∫–∞ –ú–∞–≥–∞–∑–∏–Ω–∞ */
        .shop-btn {
            margin-top: 30px; background: none; border: 1px solid var(--accent);
            color: var(--accent); padding: 10px 20px; border-radius: 50px;
            font-size: 13px; font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>

    <h2 style="margin: 10px 0 20px; letter-spacing: -0.5px;">MeowVibe AI üêæ</h2>

    <!-- –®–ö–ê–õ–ê –î–û–í–ï–†–ò–Ø -->
    <div class="trust-section">
        <div class="trust-label">
            <span>–£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –∫–æ—Ç–∞</span>
            <span id="trust-pct">40%</span>
        </div>
        <div class="trust-bar"><div id="trust-fill" style="width: 40%;"></div></div>
    </div>

    <!-- –•–£–ö–ò -->
    <div class="hooks-grid">
        <div class="hook-card" onclick="playHook('can', 0)">
            <span>ü•´</span><b>–ó–≤—É–∫ –±–∞–Ω–∫–∏</b>
        </div>
        <div class="hook-card" onclick="playHook('pouch', 0)">
            <span>üõçÔ∏è</span><b>–®—É—Ä—à–∞–Ω–∏–µ</b>
        </div>
        <div class="hook-card" onclick="buyFeature('ultrasound', 5)">
            <div class="premium-star">‚≠êÔ∏è 5</div>
            <span>üîä</span><b>–£–ª—å—Ç—Ä–∞–∑–≤—É–∫</b>
        </div>
        <div class="hook-card" onclick="buyFeature('scare', 10)">
            <div class="premium-star">‚≠êÔ∏è 10</div>
            <span>üö´</span><b>–ö—ã—à-—ç—Ñ—Ñ–µ–∫—Ç</b>
        </div>
    </div>

    <!-- –°–ö–ê–ù–ï–† -->
    <div class="scanner-container">
        <div id="laser"></div>
        <div id="output">–ü—Ä–∏–ª–æ–∂–∏ –ø–∞–ª–µ—Ü –¥–ª—è —Å–≤—è–∑–∏</div>
        <button class="main-btn" id="scan-btn" onclick="startScan()">üêæ</button>
    </div>

    <button class="shop-btn" onclick="buyFeature('pashtet', 3)">‚≠êÔ∏è –ó–∞–¥–æ–±—Ä–∏—Ç—å –∫–æ—Ç–∞ (–ø–∞—à—Ç–µ—Ç)</button>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let trust = 40;
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    const badPhrases = [
        "–ì–¥–µ –º–æ—è –µ–¥–∞, ¬´–∫–æ–∂–∞–Ω—ã–π¬ª? üòæ",
        "–ú–æ–∂–µ—Ç –Ω–µ –±—É–¥–µ–º —Å–µ–≥–æ–¥–Ω—è –≥–æ–ª–æ–¥–∞—Ç—å?",
        "–ö–∞–∫ —Ü–∞—Ä–∞–ø–Ω—É! –†—É–∫–∏ –ø—Ä–æ—á—å! üòº",
        "–¢—ã–≥-–¥—ã–∫ –Ω–∞ –≥–æ–ª–æ–≤–µ —É—Å—Ç—Ä–æ–∏—Ç—å?"
    ];
    const goodPhrases = [
        "–õ—é–±–∏–º—ã–π –∫–æ–∂–∞–Ω—ã–π —Ö–æ–∑—è–∏–Ω... ‚ù§Ô∏è",
        "–ú–æ–∏ –º—è—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è.",
        "–ì–ª–∞–¥—å –º–µ–Ω—è –ø–æ–ª–Ω–æ—Å—Ç—å—é! ‚ú®",
        "–õ–∞–¥–Ω–æ, —Ç—ã –ª—É—á—à–∏–π –∏–∑ –ª—é–¥–µ–π."
    ];

    function startScan() {
        if(trust < 10) {
            tg.showAlert("–ö–æ—Ç –≤ —è—Ä–æ—Å—Ç–∏! –û–Ω –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—â–∞—Ç—å—Å—è. –ö—É–ø–∏ –ø–∞—à—Ç–µ—Ç ‚≠êÔ∏è");
            return;
        }

        const btn = document.getElementById('scan-btn');
        const laser = document.getElementById('laser');
        const out = document.getElementById('output');

        tg.HapticFeedback.impactOccurred('heavy');
        btn.style.pointerEvents = 'none';
        laser.style.display = 'block';
        laser.style.animation = 'scanAnim 1.5s infinite linear';
        out.innerText = "–°–∫–∞–Ω–∏—Ä—É—é –±–∏–æ–ø–æ–ª–µ...";

        setTimeout(() => {
            laser.style.display = 'none';
            btn.style.pointerEvents = 'auto';
            
            // –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ—Ä–∞–∑—ã –æ—Ç –¥–æ–≤–µ—Ä–∏—è
            const list = trust > 50 ? goodPhrases : badPhrases;
            out.innerText = list[Math.floor(Math.random() * list.length)];
            
            // –°–Ω–∏–∂–∞–µ–º –¥–æ–≤–µ—Ä–∏–µ –∑–∞ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ
            trust = Math.max(0, trust - 15);
            updateUI();
            tg.HapticFeedback.notificationOccurred('success');
        }, 3000);
    }

    function playHook(type, cost) {
        tg.HapticFeedback.impactOccurred('medium');
        
        if(type === 'can') {
            // –ò–º–∏—Ç–∞—Ü–∏—è –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —â–µ–ª—á–∫–∞ –±–∞–Ω–∫–∏
            beep(600, 'square', 0.1); 
            setTimeout(() => beep(400, 'sine', 0.2), 100);
            tg.showAlert("üîä –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–∂—É –∑–≤—É–∫ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π—Å—è –±–∞–Ω–∫–∏...");
        } else if(type === 'pouch') {
            // –ò–º–∏—Ç–∞—Ü–∏—è —à—É—Ä—à–∞–Ω–∏—è (–±–µ–ª—ã–π —à—É–º)
            const bufferSize = audioCtx.sampleRate * 0.5;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) { data[i] = Math.random() * 2 - 1; }
            const noise = audioCtx.createBufferSource();
            noise.buffer = buffer;
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'highpass'; filter.frequency.value = 1000;
            noise.connect(filter); filter.connect(audioCtx.destination);
            noise.start();
            tg.showAlert("üõçÔ∏è –®—É—Ä—à—É –ø–∞–∫–µ—Ç–∏–∫–æ–º –≤–ª–∞–∂–Ω–æ–≥–æ –∫–æ—Ä–º–∞...");
        }
        
        // –ó–≤—É–∫–∏ –µ–¥—ã –ø–æ–≤—ã—à–∞—é—Ç –¥–æ–≤–µ—Ä–∏–µ!
        trust = Math.min(100, trust + 5);
        updateUI();
    }

    function buyFeature(name, price) {
        tg.showConfirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞ ‚≠êÔ∏è ${price}?`, (ok) => {
            if(ok) {
                if(name === 'pashtet') {
                    trust = 100;
                    updateUI();
                    tg.showAlert("–ö–æ—Ç —Å—ä–µ–ª –ø–∞—à—Ç–µ—Ç –∏ —Ç–µ–ø–µ—Ä—å –æ–±–æ–∂–∞–µ—Ç —Ç–µ–±—è!");
                } else {
                    tg.showAlert("–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ–ø–ª–∞—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –±–æ—Ç—É.");
                }
            }
        });
    }

    function updateUI() {
        document.getElementById('trust-fill').style.width = trust + "%";
        document.getElementById('trust-pct').innerText = trust + "%";
        // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç —à–∫–∞–ª—ã
        const fill = document.getElementById('trust-fill');
        if(trust < 30) fill.style.background = "#ff4d4d";
        else if(trust < 70) fill.style.background = "#ff9500";
        else fill.style.background = "#4aff4a";
    }

    function beep(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        osc.type = type; osc.frequency.value = freq;
        osc.connect(g); g.connect(audioCtx.destination);
        osc.start(); g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
        osc.stop(audioCtx.currentTime + duration);
    }
</script>
</body>
</html>
